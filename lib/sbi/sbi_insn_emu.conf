# SPDX-License-Identifier: BSD-2-Clause

if SBI_ISA_EXT_EMU

config EMU_ALL
	bool "All supported extensions"
	default y
	help
	  Emulates all supported ISA extensions, i.e RVA23U64 and beyond.
	select EMU_RVA23
	select EMU_ZBC

config EMU_RVA23
	bool "All supported mandatory extensions of RVA23U64"
	default n
	help
	  Emulates some ISA extensions required by the RVA23U64 profile, but not e.g. Zvfhmin.
	  This feature requires RVV 1.0 vector hardware.
	select EMU_RVB23
	select EMU_ZVBB
	select EMU_SUPM

config EMU_RVB23
	bool "All supported mandatory extensions of RVB23U64"
	default n
	help
	  Emulates all ISA extensions required by the RVA22U64 profile on RVA20 CPUs.
	select EMU_RVA22
	select EMU_ZICOND
	select EMU_ZIMOP
	select EMU_ZAWRS
	select EMU_ZFA
	select EMU_ZCB
	select EMU_ZCMOP

config EMU_RVA22
	bool "All supported mandatory extensions of RVA22U64"
	default n
	help
	  Emulates all ISA extensions required by the RVA22U64 profile on RVA20 CPUs.
	select EMU_ZICBOM
	select EMU_ZICBOZ
	select EMU_ZFHMIN
	select EMU_ZBA
	select EMU_ZBB
	select EMU_ZBS

config EMU_ZICBOM
	bool "Zicbom"
	default n
	help
	  Cache-block management instructions.
	  Zicbom emulation depends on OpenSBI's FDT CMO helper library.
	depends on SBI_ISA_EXT_EMU
	select FDT_CACHE

config EMU_ZICBOZ
	bool "Zicboz"
	default n
	help
	  Cache-block zero instructions.
	depends on SBI_ISA_EXT_EMU

config EMU_ZICOND
	bool "Zicond"
	default n
	help
	  Integer conditional operations.
	depends on SBI_ISA_EXT_EMU

config EMU_ZIMOP
	bool "Zimop"
	default n
	help
	  May-be-operations.
	depends on SBI_ISA_EXT_EMU

config EMU_ZAWRS
	bool "Zawrs"
	default n
	help
	  Wait-on-reservation-set instructucions.
	  Loops containing WRS.STO or WRS.NTO will degrade to busy waiting.
	depends on SBI_ISA_EXT_EMU

config EMU_ZFA
	bool "Zfa"
	default n
	help
	  Additional floating-point instructions.
	depends on SBI_ISA_EXT_EMU

config EMU_ZFHMIN
	bool "Zfhmin"
	default n
	help
	  Half-precision floating-point.
	depends on SBI_ISA_EXT_EMU

config EMU_ZCB
	bool "Zcb"
	default n
	help
	  Additional compressed instructions.
	depends on SBI_ISA_EXT_EMU

config EMU_ZCMOP
	bool "Zcmop"
	default n
	help
	  Compressed may-be-operations.
	depends on SBI_ISA_EXT_EMU

config EMU_ZBA
	bool "Zba"
	default n
	help
	  Address generation.
	depends on SBI_ISA_EXT_EMU

config EMU_ZBB
	bool "Zbb"
	default n
	help
	  Basic bit-manipulation.
	depends on SBI_ISA_EXT_EMU

config EMU_ZBC
	bool "Zbc"
	default n
	help
	  Carry-less multiplication.
	depends on SBI_ISA_EXT_EMU

config EMU_ZBS
	bool "Zbs"
	default n
	help
	  Single-bit instructions.
	depends on SBI_ISA_EXT_EMU

config EMU_ZVBB
	bool "Zvbb (needs RVV 1.0 and Zbb)"
	default n
	help
	  Vector basic bit-manipulation instructions.
	  Zvbb emulation strictly requires RVV 1.0 hardware.
	  It also uses (native or emulated) Zbb instructions.
	depends on SBI_ISA_EXT_EMU

if EMU_ZVBB
choice EMU_ZVBB_VLMAX_BYTES
	prompt "Reserve buffers for VLEN of at most:"
	default EMU_ZVBB_VLEN_256
	config EMU_ZVBB_VLEN_128
		bool "128 bits"
	config EMU_ZVBB_VLEN_256
		bool "256 bits"
	config EMU_ZVBB_VLEN_512
		bool "512 bits"
	config EMU_ZVBB_VLEN_1024
		bool "1024 bits"
endchoice
endif

config EMU_SUPM
	bool "Supm"
	default n
	help
	  Pointer masking, with the execution environment providing a means to
	  select PMLEN=0 and PMLEN=7 at minimum.
	  Pointer masking needs to be set up via SBI and relies on page faults.
	depends on SBI_ISA_EXT_EMU

endif
